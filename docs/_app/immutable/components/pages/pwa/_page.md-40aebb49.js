import{S as cs,i as ls,s as us,k as s,x as is,a as u,q as c,l as a,m as e,y as ks,h as p,c as i,r as l,n as g,b as rs,G as n,z as ds,C as fs,f as ms,t as hs,A as gs}from"../../../chunks/index-f05a2fe5.js";import{T as ys}from"../../../chunks/TOC-2a526c9d.js";function vs(K){let d,E,y,Q,t,x,X,Y,I,Z,nn,k,T,sn,an,S,tn,pn,q,en,on,H,cn,ln,v,un,M,kn,rn,dn,z,fn,$,mn,hn,r,j,gn,yn,O,vn,_n,P,wn,En,R,Cn,Ln,_,An,W,bn,xn,In,C,ss=`<code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manifest<span class="token punctuation">"</span></span> 
      <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>use-credentials<span class="token punctuation">"</span></span> 
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>%sveltekit.assets%/manifest.json<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>apple-touch-icon<span class="token punctuation">"</span></span> 
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>%sveltekit.assets%/apple-touch-icon.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code>`,Tn,L,as=`<code class="language-json"><span class="token comment">/* manifest.json */</span>
<span class="token punctuation">&#123;</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"svelte-test-pwa"</span><span class="token punctuation">,</span>
  <span class="token property">"short_name"</span><span class="token operator">:</span> <span class="token string">"svelte-pwa"</span><span class="token punctuation">,</span>
  <span class="token property">"start_url"</span><span class="token operator">:</span> <span class="token string">"/pwa_test/"</span><span class="token punctuation">,</span>
  <span class="token property">"scope"</span><span class="token operator">:</span> <span class="token string">"/pwa_test/"</span><span class="token punctuation">,</span>
  <span class="token property">"display"</span><span class="token operator">:</span> <span class="token string">"standalone"</span><span class="token punctuation">,</span>
  <span class="token property">"background_color"</span><span class="token operator">:</span> <span class="token string">"#fff"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Test for a simple pwa"</span><span class="token punctuation">,</span>
  <span class="token property">"theme_color"</span><span class="token operator">:</span> <span class="token string">"#5a0fc8"</span><span class="token punctuation">,</span>
  <span class="token property">"accent_color"</span><span class="token operator">:</span> <span class="token string">"#c8590f"</span><span class="token punctuation">,</span>
  <span class="token property">"orientation"</span><span class="token operator">:</span> <span class="token string">"portrait"</span><span class="token punctuation">,</span>
  <span class="token property">"icons"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      <span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"logo.svg"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image/svg"</span><span class="token punctuation">,</span>
      <span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"192x192 512x512"</span><span class="token punctuation">,</span>
      <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"maskable any"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      <span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"pwa_512.png"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>
      <span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"512x512"</span><span class="token punctuation">,</span>
      <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"maskable"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      <span class="token property">"src"</span><span class="token operator">:</span> <span class="token string">"pwa_192.png"</span><span class="token punctuation">,</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"image/png"</span><span class="token punctuation">,</span>
      <span class="token property">"sizes"</span><span class="token operator">:</span> <span class="token string">"192x192"</span><span class="token punctuation">,</span>
      <span class="token property">"purpose"</span><span class="token operator">:</span> <span class="token string">"maskable"</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code>`,Sn,V,qn,D,Hn,Mn,N,w,$n,U,jn,On,Pn,A,ts=`<code class="language-js"><span class="token comment">/* src/service-worker.js */</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> build<span class="token punctuation">,</span> files <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'$service-worker'</span><span class="token punctuation">;</span>
 
<span class="token comment">/* Create a unique cache name for this deployment
   update assets by altering CACHE_NAME           */</span>
<span class="token keyword">const</span> <span class="token constant">CACHE_NAME</span> <span class="token operator">=</span> <span class="token string">"cache-pwa-0.0.2"</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> <span class="token constant">ASSETS</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token operator">...</span>build<span class="token punctuation">,</span> <span class="token comment">/* the app itself           */</span>
  <span class="token operator">...</span>files  <span class="token comment">/* everything in &#96;static&#96;   */</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
 

<span class="token comment">/* INSTALL */</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'install'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"install"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* Create a new cache and add all files to it */</span>
  <span class="token comment">// self.skipWaiting();</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">addFilesToCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token constant">ASSETS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
 
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span><span class="token function">addFilesToCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/* ACTIVATE */</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"activate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* Remove previous cached data from disk  */</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">deleteOldCaches</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'cache-pwa'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">!==</span> <span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>     
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span><span class="token function">deleteOldCaches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 

<span class="token comment">/* FETCH */</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'fetch'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/* ignore POST requests etc */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>method <span class="token operator">!==</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
 
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">respond</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// const url = new URL(event.request.url);</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">CACHE_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">/* &#96;build&#96;/&#96;files&#96; can always be served from the cache */</span>
    <span class="token comment">// if (ASSETS.includes(url.pathname)) &#123;</span>
    <span class="token comment">//   return cache.match(event.request);</span>
    <span class="token comment">// &#125;</span>
 
    <span class="token comment">/* for everything else, try the network first, but
       fall back to the cache if we're offline          */</span>
    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">return</span> response<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
  event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span><span class="token function">respond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,F;return y=new ys({props:{links:K[0]}}),{c(){d=s("div"),E=s("div"),is(y.$$.fragment),Q=u(),t=s("div"),x=s("h1"),X=c("PWA"),Y=u(),I=s("h2"),Z=c("Images"),nn=u(),k=s("ul"),T=s("li"),sn=c("512x512"),an=u(),S=s("li"),tn=c("192x192"),pn=u(),q=s("li"),en=c("safe area: 80% of image"),on=u(),H=s("li"),cn=c("maskable: 60% of image"),ln=u(),v=s("li"),un=c("place in "),M=s("code"),kn=c("static"),rn=c(" folder"),dn=u(),z=s("br"),fn=u(),$=s("h2"),mn=c("Manifst"),hn=u(),r=s("ul"),j=s("li"),gn=c("short_name or name"),yn=u(),O=s("li"),vn=c("icons - must include a 192px and a 512px icon"),_n=u(),P=s("li"),wn=c("start_url"),En=u(),R=s("li"),Cn=c("display: standalone, fullscreen, or minimal-ui"),Ln=u(),_=s("li"),An=c("place in "),W=s("code"),bn=c("static"),xn=c(" folder"),In=u(),C=s("pre"),Tn=u(),L=s("pre"),Sn=u(),V=s("br"),qn=u(),D=s("h2"),Hn=c("Service Worker"),Mn=u(),N=s("ul"),w=s("li"),$n=c("place in "),U=s("code"),jn=c("src"),On=c(" next to app.html"),Pn=u(),A=s("pre"),this.h()},l(h){d=a(h,"DIV",{class:!0});var b=e(d);E=a(b,"DIV",{class:!0});var Rn=e(E);ks(y.$$.fragment,Rn),Rn.forEach(p),Q=i(b),t=a(b,"DIV",{class:!0});var o=e(t);x=a(o,"H1",{});var Wn=e(x);X=l(Wn,"PWA"),Wn.forEach(p),Y=i(o),I=a(o,"H2",{});var Dn=e(I);Z=l(Dn,"Images"),Dn.forEach(p),nn=i(o),k=a(o,"UL",{});var f=e(k);T=a(f,"LI",{});var Nn=e(T);sn=l(Nn,"512x512"),Nn.forEach(p),an=i(f),S=a(f,"LI",{});var Un=e(S);tn=l(Un,"192x192"),Un.forEach(p),pn=i(f),q=a(f,"LI",{});var zn=e(q);en=l(zn,"safe area: 80% of image"),zn.forEach(p),on=i(f),H=a(f,"LI",{});var Vn=e(H);cn=l(Vn,"maskable: 60% of image"),Vn.forEach(p),ln=i(f),v=a(f,"LI",{});var B=e(v);un=l(B,"place in "),M=a(B,"CODE",{});var Fn=e(M);kn=l(Fn,"static"),Fn.forEach(p),rn=l(B," folder"),B.forEach(p),f.forEach(p),dn=i(o),z=a(o,"BR",{id:!0}),fn=i(o),$=a(o,"H2",{});var Bn=e($);mn=l(Bn,"Manifst"),Bn.forEach(p),hn=i(o),r=a(o,"UL",{});var m=e(r);j=a(m,"LI",{});var Gn=e(j);gn=l(Gn,"short_name or name"),Gn.forEach(p),yn=i(m),O=a(m,"LI",{});var Jn=e(O);vn=l(Jn,"icons - must include a 192px and a 512px icon"),Jn.forEach(p),_n=i(m),P=a(m,"LI",{});var Kn=e(P);wn=l(Kn,"start_url"),Kn.forEach(p),En=i(m),R=a(m,"LI",{});var Qn=e(R);Cn=l(Qn,"display: standalone, fullscreen, or minimal-ui"),Qn.forEach(p),Ln=i(m),_=a(m,"LI",{});var G=e(_);An=l(G,"place in "),W=a(G,"CODE",{});var Xn=e(W);bn=l(Xn,"static"),Xn.forEach(p),xn=l(G," folder"),G.forEach(p),m.forEach(p),In=i(o),C=a(o,"PRE",{class:!0});var ps=e(C);ps.forEach(p),Tn=i(o),L=a(o,"PRE",{class:!0});var es=e(L);es.forEach(p),Sn=i(o),V=a(o,"BR",{id:!0}),qn=i(o),D=a(o,"H2",{});var Yn=e(D);Hn=l(Yn,"Service Worker"),Yn.forEach(p),Mn=i(o),N=a(o,"UL",{});var Zn=e(N);w=a(Zn,"LI",{});var J=e(w);$n=l(J,"place in "),U=a(J,"CODE",{});var ns=e(U);jn=l(ns,"src"),ns.forEach(p),On=l(J," next to app.html"),J.forEach(p),Zn.forEach(p),Pn=i(o),A=a(o,"PRE",{class:!0});var os=e(A);os.forEach(p),o.forEach(p),b.forEach(p),this.h()},h(){g(E,"class","toc"),g(z,"id","manifest"),g(C,"class","language-html"),g(L,"class","language-json"),g(V,"id","worker"),g(A,"class","language-js"),g(t,"class","content"),g(d,"class","page")},m(h,b){rs(h,d,b),n(d,E),ds(y,E,null),n(d,Q),n(d,t),n(t,x),n(x,X),n(t,Y),n(t,I),n(I,Z),n(t,nn),n(t,k),n(k,T),n(T,sn),n(k,an),n(k,S),n(S,tn),n(k,pn),n(k,q),n(q,en),n(k,on),n(k,H),n(H,cn),n(k,ln),n(k,v),n(v,un),n(v,M),n(M,kn),n(v,rn),n(t,dn),n(t,z),n(t,fn),n(t,$),n($,mn),n(t,hn),n(t,r),n(r,j),n(j,gn),n(r,yn),n(r,O),n(O,vn),n(r,_n),n(r,P),n(P,wn),n(r,En),n(r,R),n(R,Cn),n(r,Ln),n(r,_),n(_,An),n(_,W),n(W,bn),n(_,xn),n(t,In),n(t,C),C.innerHTML=ss,n(t,Tn),n(t,L),L.innerHTML=as,n(t,Sn),n(t,V),n(t,qn),n(t,D),n(D,Hn),n(t,Mn),n(t,N),n(N,w),n(w,$n),n(w,U),n(U,jn),n(w,On),n(t,Pn),n(t,A),A.innerHTML=ts,F=!0},p:fs,i(h){F||(ms(y.$$.fragment,h),F=!0)},o(h){hs(y.$$.fragment,h),F=!1},d(h){h&&p(d),gs(y)}}}function _s(K){return[[{name:"Images",path:"#top"},{name:"Manifest",path:"#manifest"},{name:"Service Worker",path:"#worker"}]]}class Cs extends cs{constructor(d){super(),ls(this,d,_s,vs,us,{})}}export{Cs as default};
